(()=>{"use strict";const e=(e,t={})=>{e.value.length>=e.maxLength&&(t.returnValue=!1)},t=e=>null==e||"object"==typeof e&&0===Object.keys(e).length||!(!Array.isArray(e)||0!==e.length)||"string"==typeof e&&0===e.trim().length,i=e=>{if(0==e)return 0;const t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toFixed(2)+" "+["Byte","KB","MB","GB","TB","PB"][t]},n=e=>"string"==typeof e?e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'"):e,s=document,o=(e,...t)=>{const i=s.createElement(e);return a(i,...t),i},a=(e,...i)=>{const n=r(e);for(const e of i)t(e)||n?.classList.add(e);return n},l=(e,...i)=>{const n=r(e);for(const e of i)t(e)||n?.classList.remove(e);return n},r=e=>e instanceof HTMLElement?e:s.querySelector(e),c=e=>e instanceof HTMLElement?e:s.querySelectorAll(e),d={on(e,t){if(this._eventHandlers||(this._eventHandlers={}),"string"==typeof e)this._eventHandlers[e]||(this._eventHandlers[e]=[]),this._eventHandlers[e].push(t);else if("object"==typeof e)for(let t in e){let i=t,n=e[t];this._eventHandlers[i]||(this._eventHandlers[i]=[]),this._eventHandlers[i].push(n)}return this},off(e,t){if(!this._eventHandlers)return;if(!e&&!t)return void(this._eventHandlers={});if(e&&!t)return void delete this._eventHandlers[e];let i=this._eventHandlers?.[e];if(i){let e=i.indexOf(t);-1!==e&&i.splice(e,1)}return this},unbind(...e){this.off(...e)},trigger(e,...t){if(this._eventHandlers?.[e])if("string"==typeof e)this._eventHandlers[e].forEach((e=>e.apply(this,t)));else if("object"==typeof e)for(let t in e){let i=t,n=e[t];this._eventHandlers[i].forEach((e=>e.apply(this,n)))}}},h={collection:new Set,add(e){this.collection.add(e)},delete(e){this.collection.delete(e)},get(e){return Array.from(this.collection).find((t=>t.id==e))},getAll(){return this.collection},hasSingleton(){return!!Array.from(this.collection).find((e=>1==e.singleton))}},p=(e,t)=>{if("show"==t){if(h.hasSingleton()&&1!=e.singleton)return;1==e.singleton&&h.getAll().forEach((e=>{e.close()})),h.add(e)}else"hide"==t&&(h.delete(e),1!=e.persistent&&e.remove())},g={promisifyModal(e){const t="string"==typeof e?r(e):e;if(!t)return null;if(1==t.promisify)return t;const i=t.querySelectorAll("[data-modal-btn]");return i.forEach((e=>{e.addEventListener("click",(()=>{t.resolve?.(e.dataset.modalBtn),e.dataset.modalClose&&"manual"==e.dataset.modalClose||t.hide()})),e.setText=t=>(e.innerText=t,e),e.setColor=t=>{switch(t){case"blue":l("$btn","btn-red","btn-white"),a("$btn","btn-blue");break;case"red":l("$btn","btn-blue","btn-white"),a("$btn","btn-red");break;case"white":l("$btn","btn-red","btn-blue"),a("$btn","btn-white")}return e}})),t.getBtn=e=>{const t=Array.from(i).filter((t=>t.dataset.modalBtn==e));return t?.pop()},t.show=e=>(t.style.display="block",t.onshow?.(),t.onswitch?.(t,"show"),e?.(),new Promise(((e,i)=>{t.resolve=e,t.reject=i,t.close=()=>{e("CLOSE"),t.hide()}}))),t.hide=()=>{t.style.display="none",i.forEach((e=>{e.onclick=void 0})),t.onhide?.(),t.onswitch?.(t,"hide")},t.close=t.hide,t.enableBtn=e=>{const i=t.querySelector('[data-modal-btn="'+e+'"]');i&&(i.disabled=!1)},t.disableBtn=e=>{const i=t.querySelector('[data-modal-btn="'+e+'"]');i&&(i.disabled=!0)},t.on=(e,i)=>{switch(e){case"show":t.onshow=i;break;case"hide":t.onhide=i;break;case"switch":t.onswitch=i}return t},t.off=e=>{switch(e){case"show":t.onshow=null;break;case"hide":t.onhide=null;break;case"switch":t.onswitch=null}return t},t.promisify=!0,t},buildTemplate(e){const t=o("div","modal","top-front"),i=o("div","modalWrap");t.appendChild(i);const n=o("div","modal_content");i.appendChild(n);const s=o("div","modalTitle");s.style.display="none",n.appendChild(s),t.getTitleDiv=()=>s;const l=o("div","modalBody","flex-direction-column");l.style.display="none",n.appendChild(l),t.getMsgDiv=()=>l;const r=o("div","modalInfo");r.style.display="none",n.appendChild(r),t.getDetailDiv=()=>r;const c=o("div","modalBtnDiv");return"vertical"==e&&a(c,"flex-direction-column"),n.appendChild(c),t.addBtn=e=>{c.appendChild(e)},t.singleton=!1,t.addBlackout=()=>{t.style.background="rgba(0,0,0,0.5)"},t.removeBlackout=()=>{t.style.background=""},t},buildButton(e){switch(e){case"OK":const t=o("button","btn","btn-md","btn-blue");return t.innerHTML="확 인",t.dataset.modalBtn="OK",t;case"CLOSE":const i=o("button","btn","btn-md","btn-silver");return i.innerHTML="닫 기",i.dataset.modalBtn="CLOSE",i;case"CANCEL":const n=o("button","btn","btn-md","btn-silver");return n.innerHTML="취 소",n.dataset.modalBtn="CANCEL",n;case"DELETE":const s=o("button","btn","btn-md","btn-red");return s.innerHTML="삭 제",s.dataset.modalBtn="DELETE",s;default:const{isPrimary:l,key:r,text:c}=e,d=o("button","btn","btn-md");return a(d,1==l?"btn-blue":"btn-blue-border"),d.innerHTML=c,d.dataset.modalBtn=r,d}},buildModal(e={}){const{btnList:t,direction:i="horizontal",target:n=r("body")}=e,s=this.buildTemplate(i);return t.forEach((e=>s.addBtn(this.buildButton(e)))),s.setTitle=e=>{const t=s.getTitleDiv();t.style.display="",t.innerHTML=e},s.setMsg=e=>{const t=o("div","commonMent");t.innerHTML=e;const i=s.getMsgDiv();i.querySelector(".commonMent")?.remove(),i.style.display="",i.appendChild(t)},s.setDetail=(...e)=>{if(0==e.length)return;const t=o("ul","modalInfo");for(const i of e){const e=o("li");e.innerHTML=i.message?i.message:i,t.appendChild(e)}const i=s.getDetailDiv();i.style.display="",i.appendChild(t)},s.setErrorInfo=(...e)=>{const t=o("ul","modalInfo");for(const i of e){const e=o("li");e.innerHTML=i.message?i.message:i,t.appendChild(e)}s.setDetail(t)},s.persistent=!1,n.appendChild(s),this.promisifyModal(s).on(p)}},u={animations:{doubleBounce:()=>{const e=o("div","sk-double-bounce"),t=o("div","sk-child","sk-double-bounce1"),i=o("div","sk-child","sk-double-bounce2");return e.appendChild(t),e.appendChild(i),e},pulse:()=>o("div","sk-spinner","sk-spinner-pulse"),spinner:()=>{const e=o("div","sk-fading-circle");for(let t=0;t<12;t++){const i=o("div","sk-circle","sk-circle"+(t+1));e.appendChild(i)}return e},foldingCube:()=>{const e=o("div","sk-folding-cube"),t=o("div","sk-cube","sk-cube1"),i=o("div","sk-cube","sk-cube2"),n=o("div","sk-cube","sk-cube3"),s=o("div","sk-cube","sk-cube4");return e.appendChild(t),e.appendChild(i),e.appendChild(s),e.appendChild(n),e}},promisifyModal(e){const t="string"==typeof e?r(e):e;if(!t)return null;if(1==t.promisify)return t;const i=t.querySelectorAll("[data-modal-btn]");return t.show=()=>(a(t,"visible"),l(t,"hidden"),t.onshow?.(),t.onswitch?.(t,"show"),new Promise(((e,n)=>{i.forEach((i=>{i.onclick=()=>{e(i.dataset.modalBtn),t.hide()}})),t.close=()=>{e("CLOSE"),t.hide()}}))),t.hide=()=>{l(t,"visible"),a(t,"hidden"),i.forEach((e=>{e.onclick=void 0})),t.onhide?.(),t.onswitch?.(t,"hide")},t.close=t.hide,t.on=(e,i)=>{switch(e){case"show":t.onshow=i;break;case"hide":t.onhide=i;break;case"switch":t.onswitch=i}return t},t.off=e=>{switch(e){case"show":t.onshow=null;break;case"hide":t.onhide=null;break;case"hide":t.onswitch=null}return t},t.promisify=!0,t},buildTemplate(){const e=o("div","modal","loading-modal","visible"),t=o("div","loading-info-box","m-2");e.appendChild(t);const i=o("div","loading-animation");t.appendChild(i);const n=o("div","loading-text");return t.appendChild(n),e.setAnimation=t=>{const n=this.animations[t]?.();i.appendChild(n),e.animation=n},e.setPosition=t=>{e.style.position=t},e.setText=e=>{n.innerHTML=e},e.setTextColor=e=>{n.style.color=e},e.setAnimationColor=t=>{e.animation.setColor(t)},e.setBackgroundColor=t=>{e.style.backgroundColor=t},e.setBackgroundOpacity=t=>{e.style.opacity=t},e.persistent=!1,e.addBlackout=()=>{e.style.background="rgba(0,0,0,0.5)",l(i,"blackout")},e.removeBlackout=()=>{e.style.background="none",a(i,"blackout")},e},buildLoading(e={}){const{position:t="auto",text:i="",color:n="#fff",opacity:s="0.7",backgroundColor:o="rgb(0,0,0)",animation:a="doubleBounce",target:c=r("body"),blackout:d=!0,isModal:g=!0}=e,u=h.get("loadingModal")?h.get("loadingModal"):this.buildTemplate();return u.setPosition(t),u.setAnimation(a),u.setText(i),u.setTextColor(n),u.setBackgroundColor(o),u.setBackgroundOpacity(s),d?u.addBlackout():u.removeBlackout(),g||l(u,"modal"),c.appendChild(u),this.promisifyModal(u).on("switch",p)}},f={init(){this.target=r("body"),this.persistentMap=new Map,c(".modal").forEach(((e,t)=>{const i=g.promisifyModal(e)?.on("switch",p);if(i){i.persistent=!0;const e=i.id?i.id:"modal"+t;this.persistentMap.set(e,i),i.hide()}}))},persistentModal(e){return this.persistentMap.get(e)},info(e={}){const{id:t="infoModal",title:i="알 림",detail:n,msg:s,singleton:o=!1}=e;console.log("info modal","title",i,"msg",s,"detail",n);const a=g.buildModal({btnList:["OK"]});return a.id=t,a.singleton=o,i&&a.setTitle(i),s&&a.setMsg(s),n&&a.setDetail(...n),a},confirm(e={}){const{id:t="confirmModal",title:i,msg:n,detail:s,delMode:o=!1,singleton:a=!1}=e,l=1==o?["CANCEL","DELETE"]:["CANCEL","OK"],r=g.buildModal({btnList:l});return r.id=t,r.singleton=a,i&&r.setTitle(i),n&&r.setMsg(n),s&&r.setDetail(...s),r},select(e={}){const{id:t="selectModal",title:i,msg:n,select:s=[],singleton:o=!1,direction:a="vertical"}=e;s.push("CLOSE");const l=g.buildModal({btnList:s,direction:a});return l.id=t,l.singleton=o,i&&l.setTitle(i),n&&l.setMsg(n),l},error(e={}){const{id:t="errorModal",singleton:i=!1,response:{status:n,responseText:s,message:o,detail:a,error:l}}=e,r=g.buildModal({btnList:["OK"]});switch(r.id=t,r.singleton=i,n){case 0:r.setTitle("연결 실패"),r.setMsg("서버와의 연결이 끊어졌습니다. 인터넷 연결 상태를 확인하고 다시 시도해주세요."),r.onhide=e=>{location.href="/login"},r.singleton=!0;break;case 500:r.setTitle("500 Internal Server Error"),r.setMsg("서버에서 요청을 처리할 수 없습니다. 지속적으로 발생할 경우 관리자에게 문의해주세요.");break;case 400:r.setTitle("400 Bad Request"),r.setMsg("요청문에 오류가 있거나 서버가 요청을 이해하지 못했습니다. 지속적으로 발생할 경우 관리자에게 문의해주세요.");break;case 422:r.setTitle("422 Unprocessable Entity"),r.setMsg("요청에 대해 응답할 수 없습니다. 지속적으로 발생할 경우 관리자에게 문의해주세요.");break;case 401:r.setTitle("401 Unauthorized"),r.setMsg(s||"인증되지 않은 사용자의 요청입니다. 로그인 페이지로 이동합니다."),r.onhide=e=>{location.href="/login"},r.singleton=!0;break;case 403:r.setTitle("403 Forbidden"),r.setMsg("요청에 대한 권한이 없습니다.");break;case 404:r.setTitle("404 Not Found"),r.setMsg("요청한 페이지를 찾을 수 없습니다. 지속적으로 발생할 경우 관리자에게 문의해주세요.");break;case 409:r.setTitle("409 Conflict"),r.setMsg("요청한 서비스가 현재 사용 가능하지 않습니다. 다시 시도해 주세요.");break;default:r.setTitle("잠시 후 다시 시도해주세요"),r.setMsg("서버로부터 올바른 응답을 받지 못했습니다. 지속적으로 발생할 경우 관리자에게 문의해주세요.")}return o&&r.setTitle(o),a&&r.setMsg(a),l&&0!=l.length&&r.setErrorInfo(...l),r},loading(e={}){const{id:t="loadingModal",target:i=this.target}=e;i!==this.target&&(e.blackout=!1,e.isModal=!1);const n=u.buildLoading(e);return n.id=t,n}},m={__proto__:d,init(e={}){const{}=e},promisify:e=>g.promisifyModal(e),info:(e={})=>f.info(e).show(),confirm:(e={})=>f.confirm(e).show(),select:(e={})=>f.select(e).show(),error:(e={})=>f.error(e).show(),startLoading:(e={})=>f.loading(e).show(),endLoading(e={}){h.get("loadingModal")?.hide()},get:e=>f.persistentModal(e),getPopupList:()=>h.getAll(),show:e=>f.persistentModal(e).show(),close(e){const t=h.get(e);t?.close()},closeAll(){h.getAll().forEach((e=>{e.close()}))}};f.init();const y=["success-only","http-errors-only","no-exceptions"];class b{constructor(e={}){const{request:t,param:i,loading:n=!0,debug:s=!0,exception:o=y[1],exceptionModal:a=!0}=e;this.request=t,this.param=i,this.loading=n,this.debug=s,this.exception=o}success(e){return this.successExe=e,this}error(e){return this.errorExe=e,this}finally(e){return this.finallyExe=e,this}async exe(){try{this.loading&&m.startLoading();const e=await this.request(this.param);if(this.loading&&m.endLoading(),this.exception==y[0]&&200!=e.status)throw e;return this.successExe?.(e),e}catch(e){return this.loading&&m.endLoading(),this.debug&&console.log(e),this.exceptionModal&&m.error({response:e}),this.errorExe?.(e),null}finally{this.finallyExe?.()}}}const w=(e={})=>new b(e),v={__proto__:d,init(e={}){const{officeCode:t="1000",approvalStatus:i=0,meetingStatus:n=0,roomType:s="ALL_ROOM",roomKey:o,title:a="",host:l="",attendeeName:r="",searchTarget:c="title",searchWord:d="",holdingDate:h=moment().format("YYYY-MM-DD"),startDate:p=moment().format("YYYY-MM-DD"),endDate:g=moment().add(7,"d").format("YYYY-MM-DD")}=e;this.officeCode=t,this.approvalStatus=i,this.meetingStatus=n,this.roomType=s,this.roomKey=o,this.title=a,this.host=l,this.attendeeName=r,this.searchTarget=c,this.searchWord=d,this.holdingDate=h,this.startDate=p,this.endDate=g,this.enableSearchBtn(),this.enableResetBtn(),this.enableSearchToggleBtn()},initOffice(){const e=r("#officeSelect");if(e){const t=r("#officeLabel"),i=i=>{const n=e.querySelector('[value="'+i+'"]');n.selected=!0;const s=n.text;t.innerText=s};e.onchange=e=>{const t=e.target.value;i(t),this.trigger("change","office",t)},this.selectOffice=i,this.getOffice=()=>0==e.value?null:e.value,this.selectOffice(this.officeCode)}else this.getOffice=()=>this.officeCode},initApprovalStatus(){const e=r("#approvalStatusSelect"),t=r("#approvalStatusLabel"),i=i=>{const n=e.querySelector('[value="'+i+'"]');n.selected=!0;const s=n.text;t.innerText=s};e.onchange=e=>{const t=e.target.value;i(t),this.trigger("change","approvalStatus",t)},this.selectAppStatus=i,this.getAppStatus=()=>0==e.value?null:e.value,this.selectAppStatus(this.approvalStatus)},initMeetingStatus(){const e=r("#meetingStatusSelect"),t=r("#meetingStatusLabel"),i=i=>{const n=e.querySelector('[value="'+i+'"]');n.selected=!0;const s=n.text;t.innerText=s};e.onchange=e=>{const t=e.target.value;i(t),this.trigger("change","meetingStatus",t)},this.selectMeetingStatus=i,this.getMeetingStatus=()=>0==e.value?null:e.value,this.selectMeetingStatus(this.meetingStatus)},initSearchTarget(){const e=r("#searchTargetSelect"),t=r("#searchTargetLabel"),i=i=>{const n=e.querySelector('[value="'+i+'"]');n.selected=!0;const s=n.text;t.innerText=s};e.onchange=e=>{const t=e.target.value;i(t),this.trigger("change","searchTarget",t)},this.selectTarget=i,this.getSearchTarget=()=>e.value,this.selectTarget(this.searchTarget)},initSearchWord(){const t=r("#searchWord");t.maxLength=60,t.oninput=()=>{e(t)},t.onkeyup=e=>{13==e.keyCode&&this.trigger("search",this.getSearchInput())},t.onchange=()=>{this.trigger("change","searchWord",t.value)},this.setSearchWord=e=>{t.value=e},this.getSearchWord=()=>""==t.value?null:t.value,this.setSearchWord(this.searchWord)},initPeriodPicker(e={}){const{maxDate:t}=e,i=r("#startDateDiv"),n=r("#startDateInput");n.value=this.startDate;const s=r("#endDateDiv"),o=r("#endDateInput");o.value=this.endDate,this.setStartDate=e=>{n.value=e},this.setEndDate=e=>{o.value=e},this.getStartDate=e=>n.value,this.getEndDate=e=>o.value;const a=$("#datepicker");a.datepicker({dateFormat:"yy-mm-dd"}),1==moment(t).isValid()&&a.datepicker("option","maxDate",t);const l=r("#datePickerModal");l.querySelector(".btn-blue"),l.querySelector(".btn-silver"),i.onclick=async()=>{const e=this.getStartDate(),t=this.getEndDate();if(1==moment(e).isValid()&&a.datepicker("setDate",e),"OK"==await m.get("datePickerModal").show()){const e=a.datepicker("getDate"),i=moment(e),n=i.format("YYYY-MM-DD");i.isAfter(t)&&(this.setEndDate(n),this.trigger("change","endDate",n)),this.setStartDate(n),this.trigger("change","startDate",n)}},s.onclick=async()=>{const e=this.getStartDate(),t=this.getEndDate();if(1==moment(t).isValid()&&a.datepicker("setDate",t),"OK"==await m.get("datePickerModal").show()){const t=a.datepicker("getDate"),i=moment(t),n=i.format("YYYY-MM-DD");i.isBefore(e)&&(this.setStartDate(n),this.trigger("change","startDate",n)),this.setEndDate(n),this.trigger("change","endDate",n)}}},initDatePicker(){const e=r("#dateDiv"),t=r("#dateInput");t.value=this.holdingDate,this.setDate=e=>{t.value=e},this.getDate=e=>t.value;const i=$("#datepicker");i.datepicker({dateFormat:"yy-mm-dd"});const n=moment().format("YYYY-MM-DD");e.onclick=async()=>{i.datepicker("option","minDate",n);const e=this.getDate();if(1==moment(e).isValid()&&i.datepicker("setDate",e),"OK"==await m.get("datePickerModal").show()){const e=i.datepicker("getDate"),t=moment(e).format("YYYY-MM-DD");this.setDate(t),this.trigger("change","holdingDate",t)}}},initFileType(){const e=r("#fileType");e&&(e.onchange=()=>{const e=this.getFileType();this.trigger("change","roleType",e)},this.switchFileType=t=>{e.checked=t},this.getFileType=()=>e.checked?e.value:null)},initRoomTypeSelect(){const e=r("#roomTypeSelect");if(e){const t=r("#roomTypeLabel"),i=i=>{this.trigger("change","roomType",i),e.value=i;const n=e.options[e.selectedIndex].text;t.innerText=n};e.onchange=e=>{const t=e.target.value;i(t)},this.selectRoomType=i,this.getRoomType=()=>e.value,this.selectRoomType(this.roomType)}else this.getRoomType=()=>this.roomType},initRoomTypeCheck(){const e=c('input[type=radio][name="roomType"]');e.forEach((e=>e.addEventListener("change",(async()=>{const t=e.value;this.trigger("change","roomType",t),this.loadRoomList?.()})))),this.checkRoomType=t=>{e.forEach((e=>{e.value==t?e.checked=!0:e.checked=!1}))},this.getRoomType=()=>{for(const t of e)if(1==t.checked)return t.value},this.checkRoomType(this.roomType)},initRoomSelect(){const e=r("#roomSelect"),t=r("#roomLabel"),i=(e,t)=>{const i=document.createElement("option");return i.value=e||-1,i.innerText=t,i},n=i=>{if(i){const n=e.querySelector('[value="'+i+'"]');n.selected=!0;const s=n.text;t.innerText=s}else e.selectedIndex=null,e.value=-1,t.innerText="전체";this.trigger("change","roomKey",i)};e.onchange=e=>{const t=e.target.value;n(t)},this.selectRoom=n,this.getRoom=()=>-1==e.value?void 0:e.value,this.setRoomSelectBox=t=>{e.innerHTML="";const n=i(null,"전체");e.appendChild(n);for(const n of t){const t=i(n.roomKey,n.roomName);e.appendChild(t)}};const s=i(null,"전체");e.appendChild(s),this.selectRoom(this.roomKey)},initElecYN(){const e=r("#switchElec");e.onchange=()=>{const e=this.getElecYN();this.trigger("change","elecYN",e)},this.switchElecYN=t=>{e.checked=t},this.getElecYN=()=>1==e.checked?"Y":null},initSecretYN(){const e=r("#switchSecret");e.onchange=()=>{const e=this.getSecretYN();this.trigger("change","secretYN",e)},this.switchSecretYN=t=>{e.checked=t},this.getSecretYN=()=>1==e.checked?"Y":null},initTitle(){const t=r("#titleInput");t&&(t.oninput=()=>{e(t)},t.onkeyup=e=>{13==e.keyCode&&this.trigger("search",this.getSearchInput())},t.onchange=()=>{this.trigger("change","title",t.value)},this.setTitle=e=>{t.value=e},this.getTitle=()=>""==t.value?null:t.value,this.setTitle(this.title))},initHost(){const e=r("#hostInput");e.oninput=()=>{((e,t={})=>{e.value.length>=e.maxLength&&(t.returnValue=!1),e.value=e.value.replace(/[ \{\}\[\]\/?.,;:|\)*~`!^\-_+┼<>@\#$%&\'\"\\\(\=]/gi,"")})(e)},e.onkeyup=e=>{13==e.keyCode&&this.trigger("search",this.getSearchInput())},e.onchange=()=>{this.trigger("change","host",e.value)},this.setHost=t=>{e.value=t},this.getHost=()=>""==e.value?null:e.value,this.setHost(this.host)},initAttendeeName(){const e=r("#attendeeInput");e.oninput=()=>{((e,t={})=>{e.value.length>=e.maxLength&&(t.returnValue=!1),e.value=e.value.replace(/[0-9\{\}\[\]\/?.,;:|\)*~`!^\-_+┼<>@\#$%&\'\"\\\(\=]/gi,""),e.value=e.value.replace(" ","")})(e)},e.onkeyup=e=>{13==e.keyCode&&this.trigger("search",this.getSearchInput())},e.onchange=()=>{this.trigger("change","attendee",e.value)},this.setAttendeeName=t=>{e.value=t},this.getAttendeeName=()=>""==e.value?null:e.value,this.setAttendeeName(this.attendeeName)},getSearchInput(){const e=this.getOffice?.(),t=this.getSearchTarget?.(),i=this.getSearchWord?.(),n=this.getAppStatus?.(),s=this.getMeetingStatus?.(),o=this.getDate?.(),a=this.getStartDate?.(),l=this.getEndDate?.(),r=this.getRoomType?.(),c=this.getRoom?.(),d=this.getFileType?.(),h=this.getElecYN?.(),p=this.getSecretYN?.(),g=this.getTitle?.(),u=this.getHost?.(),f=this.getAttendeeName?.();return{officeCode:e,approvalStatus:n,meetingStatus:s,searchTarget:t,searchWord:i,holdingDate:o,startDate:a,endDate:l,roomType:r,roomKey:c,roleType:d,elecYN:h,secretYN:p,title:g,host:u,attendeeName:f}},initSearchInput(e={}){const t=moment(),{holdingDate:i=t.format("YYYY-MM-DD"),startDate:n=t.clone().add(-2,"w").format("YYYY-MM-DD"),endDate:s=t.clone().add(2,"w").format("YYYY-MM-DD")}=e;this.selectOffice?.(this.officeCode),this.setSearchTarget?.("title"),this.setSearchWord?.(""),this.selectAppStatus?.("0"),this.selectMeetingStatus?.("0"),this.setDate?.(i),this.setStartDate?.(n),this.setEndDate?.(s),this.selectRoomType?.("ALL_ROOM"),this.checkRoomType?.("MEETING_ROOM"),this.selectRoom?.(),this.switchFileType?.(!1),this.switchElecYN?.(!1),this.switchSecretYN?.(!1),this.setTitle?.(""),this.setHost?.(""),this.setAttendeeName?.("")},enableSearchBtn(){const e=r("#searchBtn");e&&(e.onclick=()=>{this.trigger("search",this.getSearchInput())})},enableResetBtn(e={}){const t=r("#resetBtn");t&&(t.onclick=()=>{this.initSearchInput(e),this.trigger("reset",this.getSearchInput())});const i=r("#resetMobileBtn");i&&(i.onclick=()=>{this.initSearchInput(e),this.trigger("reset",this.getSearchInput());const t=r(".listSrchDiv");"flex"==t.style.display?t.style.display="none":t.style.display="flex"})},enableSearchToggleBtn(){const e=r(".mobileSrchBtn");e&&(e.onclick=()=>{const e=r(".listSrchDiv");"flex"==e.style.display?e.style.display="none":e.style.display="flex"})}},M=e=>e.reduce(((e,t)=>e+(t.size?t.size:t.fileSize)),0),C={__proto__:d,update(e={}){const{multiple:t=!0}=e;this.$fileInput.multiple=t},fileInput(){const e=new MouseEvent("click",{bubbles:!1,cancelable:!1});this.$fileInput.dispatchEvent(e)},getFileSize(e){return M(e||this.addedList)},addedList:[],sizeLimit:314572800,uploadLimit:10};C.$fileInput=((e={})=>{const{multiple:t=!0,accept:i=[".pdf",".hwp",".hwpx",".pptx",".ppt",".doc",".docx",".xls",".xlsx",".jpg",".jpeg",".gif",".png",".bmp"]}=e,n=o("input");return n.setAttribute("type","file"),n.setAttribute("accept",i.toString()),n.multiple=t,n.style.display="none",n})({multiple:!0}),C.$fileInput.onchange=e=>{const i=(e=>{let t=Object.values(e.files);return t=t.filter((t=>{const i=t.name;let n=i.lastIndexOf("."),s=i.slice(n+1);return e.accept.includes("."+s)})),t.forEach((e=>{e.isNew=!0,e.fileKey=((e=16)=>((e<1||e>16)&&(e=16),([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))).substring(0,e)))(5),e.originalName=e.name})),e.value="",t})(C.$fileInput);t(i)||C.trigger("added",{files:i,size:M(i),count:i.length})},r("body").appendChild(C.$fileInput);const D=C,L=["fas","fa-cog","fa-spin"],T=["fas","fa-exclamation-triangle","colorRed"],k={MATERIAL:{cls:"kOrigin",state:[[!1,!1,!1],[!1,!0,!1],[!1,!0,!1],[!1,!0,!1],[!1,!0,!0]],icon:[[],T,L,L,[]]},COPY:{cls:"kMydocu",state:[[!0,!1,!1],[!0,!1,!1],[!1,!1,!1],[!1,!1,!1],[!0,!0,!0]],icon:[[],T,L,L,[]]},REPORT:{cls:"kReport",state:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1],[!1,!1,!1],[!1,!0,!0]],icon:[[],T,L,L,[]]},MEMO:{cls:"kMemo",state:[[!0,!1,!1],[!0,!1,!1],[!1,!1,!1],[!1,!1,!1],[!0,!0,!0]],icon:[[],T,L,L,[]]},PHOTO:{cls:"kPicture",state:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1],[!1,!1,!1],[!1,!0,!0]],icon:[[],T,L,L,[]]},VOICE:{cls:"kRecord",state:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1],[!1,!1,!1],[!1,!0,!0]],icon:[[],T,L,L,[]]}},S=document.querySelector("meta[name='_csrf']")?.content,x=document.querySelector("meta[name='_csrf_header']")?.content,E=e=>Object.fromEntries(Object.entries(e).filter((([e,t])=>null!=t))),N=(e,t="GET",i=null,n={},s={})=>{const o=((e,t)=>{const i=new URLSearchParams(E(t)).toString();return i?`${e}?${i}`:e})(e,n),a={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"};S&&x&&!["GET","HEAD","OPTIONS","TRACE"].includes(t.toUpperCase())&&(a[x]=S);const l={method:t,headers:{...a,...s}};return i&&("multipart/form-data"===l.headers["Content-Type"]?(delete l.headers["Content-Type"],l.body=i instanceof FormData?i:new FormData):l.headers["Content-Type"].includes("application/x-www-form-urlencoded")?l.body=i instanceof FormData?i:new URLSearchParams(i).toString():l.body=i&&JSON.stringify(i)),console.log("Request","requestUrl:",o,"data:",i,"Options:",l),fetch(o,l).then((e=>{if(!e.ok)throw e;if("0"===e.headers.get("Content-Length"))return null;const t=e.headers.get("Content-Type");if(!t||!t.includes("application/json"))return e.text();try{return e.json()}catch(e){return null}})).catch((e=>{throw console.error("Fetch error:",e),e}))},Y=(e,t={})=>N(e,"GET",null,E(t),{}),B=(e,{data:t=null,queryParams:i={},headers:n={}}={})=>N(e,"POST",t,E(i),n),F=(e,{data:t=null,queryParams:i={},headers:n={}}={})=>N(e,"PUT",t,E(i),n),I=(e,{data:t=null,queryParams:i={},headers:n={}}={})=>N(e,"DELETE",t,E(i),n),O=e=>{window.location="/api/file/"+e+"/download"},A=e=>{window.location="/meeting/file/"+e+"/download"},H={meetingFileOne:e=>Y(`/api/ewp/meeting/file/${e}`),meetingMaterialFileList:e=>Y(`/api/ewp/meeting/${e}/file/material/list`),meetingSharedFileList:e=>Y(`/api/ewp/meeting/${e}/file/shared/list`),meetingPrivateFileList:e=>Y(`/api/ewp/meeting/${e}/file/private/list`),meetingAllFileList:e=>Y(`/api/ewp/meeting/${e}/file/all/list`),viewMeetingFileOne:(e={})=>{const{mime:t,link:i}=e;"IMG"==t||"AUDIO"==t?window.open("/meeting/file/"+i+"/view"):window.open("/viewer?file=/meeting/file/"+i+"/view")},downloadOne:O,downloadList:e=>{for(let t=0;t<e.length;t++){let i=e[t];setTimeout((function(){O(i)}),500*t)}},downloadMeetingFileOne:A,downloadMeetingFileList:e=>{for(let t=0;t<e.length;t++){let i=e[t];setTimeout((function(){A(i)}),500*t)}},viewFileOne:(e={})=>{const{fileCategory:t,fileId:i}=e;"IMG"==t?window.open("/api/file/"+i+"/view"):window.open("/viewer?file=/api/file/"+i+"/view")}},q={fileList:(e={})=>{const{fileList:t}=e;return B("/api/file/list",{data:t,headers:{"Content-Type":"multipart/form-data"}})},meetingFileList:(e={})=>{const{meetingKey:t,fileType:i,fileList:n}=e;return B(`/api/ewp/meeting/${t}/file/${i}/list`,{data:n,headers:{"Content-Type":"multipart/form-data"}})}},P={__proto__:d,init(e={}){const{editable:t=!0,deletable:i=!0,addConfirm:n=!1,delConfirm:s=!1,autoDisplay:o=!0,sizeLimit:a=314572800,uploadLimit:l=10}=e;return this.editable=t,this.addConfirm=n,this.delConfirm=s,this.deletable=i,this.sizeLimit=a,this.uploadLimit=l,this.oldList=[],this.newList=[],this.setBtnEvt(),console.log("init",this.editable),D.on("added",(async e=>{const{files:t,size:i,count:n}=e;if(this.addConfirm){const e=t.map((e=>e.name));if("OK"!=await m.confirm({title:"파일 업로드",msg:"선택한 파일을 업로드하시겠습니까?",detail:e}))return}const s=D.getFileSize(this.newList),o=n+this.newList.length;i+s>this.sizeLimit?m.info({msg:"업로드 허용 용량을 초과했습니다"}):o>this.uploadLimit?m.info({msg:"업로드 허용 개수를 초과했습니다"}):(this.newList.push(...t),this.setFileBox(t),this.setLimitInfo(),this.trigger("added",{files:t}))})),this},update(e={}){const{editable:t=this.editable,deletable:i=this.deletable,delConfirm:n=this.delConfirm,sizeLimit:s=this.sizeLimit,uploadLimit:o=this.uploadLimit}=e;return this.editable=t,this.delConfirm=n,this.deletable=i,this.sizeLimit=s,this.uploadLimit=o,this},setBtnEvt(){const e=r("#allChk");e&&(e=>{this.switchAllChk=()=>{0==this.getCheckedFileList().length&&(e.checked=!1)},e.onchange=()=>{1==e.checked?this.checkAll():this.uncheckAll(),this.validDownBtn?.(),this.validDelBtn?.()}})(e);const t=r("#fileDownBtn");t&&(t.disabled=!0,(e=>{this.validDownBtn=()=>{const t=this.isSelectedDowloadable();e.disabled=!t},e.onclick=()=>{const e=this.getCheckedFileList();H.downloadMeetingFileList(e.map((e=>e.fileKey)))}})(t));const i=r("#fileDelBtn");i&&(i.disabled=!0,(e=>{this.validDelBtn=()=>{const t=this.isSelectedDeletable();e.disabled=!t},e.onclick=()=>{const e=this.getCheckedFileList();console.log("delete",e)}})(i));const n=r("#fileDeleteAll");n&&(e=>{e.onclick=()=>{this.clearFiles()}})(n);const s=r("#uploadBtn");s&&(s.onclick=()=>{D.fileInput()})},setLimitInfo(){if(0==this.editable)return;const e=D.getFileSize(this.newList),t=this.newList.length,n=r("#fileSize"),s=r("#fileCount");n&&(n.innerHTML=i(e)),s&&(s.innerHTML=t+" 개")},setFiles(e){e&&(this.oldList=[...e],this.newList=[...e],this.clearFileBox(),this.setFileBox(e),this.setLimitInfo())},setFileBox(e){const t=k,i=e=>{const i=o("li");if(e.isNew){const e=o("span","badge","bg-info","mr-1");e.innerHTML="NEW",i.appendChild(e)}else if(e.roleType){const n=o("span","my-auto","mr-2"),s=o("i",...t[e.roleType].icon[e.state+2]);n.appendChild(s),i.appendChild(n)}const n=o("a");if(n.innerHTML=e.originalName?e.originalName:e.uploadedFileName,i.appendChild(n),1==this.deletable){const t=o("span","btn-del","ml-1");t.setAttribute("title","삭제"),n.appendChild(t),t.onclick=async()=>{if(this.delConfirm&&"DELETE"!=await m.confirm({title:"파일 삭제",msg:"해당 파일을 삭제합니다.",detail:["삭제된 파일에 대한 참석자들의 판서 내용도 함께 삭제됩니다."],delMode:!0}))return;i.remove();const t=e.fileKey?e.fileKey:e.fileId;this.deleteFiles(t),this.trigger("deleted",{files:[t]})}}return i},n=e=>{const i=o("tr"),[n,s,l]=t[e.roleType].state[e.state+2];i.deletable=n,i.downloadable=s,i.viewable=l;const r=o("td","text-align-center");i.appendChild(r);const c=o("input");c.type="checkbox",r.appendChild(c);const d=o("td","text-align-center",t[e.roleType].cls);i.appendChild(d);const h=o("div");d.appendChild(h);const p=o("div","tip");h.appendChild(p);const g=o("td","text-align-left");i.appendChild(g);const u=o("div","d-flex","flex-row");g.appendChild(u);const f=o("span","my-auto","mr-2"),m=o("i",...t[e.roleType].icon[e.state+2]);f.appendChild(m),u.appendChild(f);const y=o("span");return y.innerHTML=e.originalName,u.appendChild(y),1==i.viewable?(a(g,"cursor-pointer"),g.onclick=()=>{H.viewMeetingFileOne({mime:e.mimeType,link:e.fileKey})}):a(g,"text-muted"),i.getFile=()=>e,i.isChecked=()=>c.checked,i.check=()=>{c.checked=!0},i.uncheck=()=>{c.checked=!1},c.onchange=()=>{this.switchAllChk?.(),this.validDownBtn?.(),this.validDelBtn?.()},i},s=r("#fileContainer");e.forEach((e=>{const t=this.editable?i(e):n(e);s.appendChild(t)}))},clearFileBox(){r("#fileContainer").innerHTML=""},checkAll(){const e=r("#fileContainer").children;Array.from(e).forEach((e=>{e.check()}))},uncheckAll(){const e=r("#fileContainer").children;Array.from(e).forEach((e=>{e.uncheck()}))},getCheckedFileList(){const e=r("#fileContainer").children;return Array.from(e).filter((e=>e.isChecked())).map((e=>e.getFile()))},isSelectedDowloadable(){const e=r("#fileContainer").children,t=Array.from(e).filter((e=>e.isChecked()));return 0!=t.length&&t.reduce(((e,t)=>e&&t.downloadable),!0)},isSelectedDeletable(){const e=r("#fileContainer").children,t=Array.from(e).filter((e=>e.isChecked()));return 0!=t.length&&t.reduce(((e,t)=>e&&t.deletable),!0)},deleteFiles(...e){this.newList=this.newList.filter((t=>!e.includes(t.fileKey))),this.setLimitInfo()},clearFiles(){this.newList=[],this.setLimitInfo(),this.clearFileBox()},getAddedFiles(){const e=this.oldList.map((e=>e.fileKey));return this.newList.filter((t=>!e.includes(t.fileKey)))},getDeletedFiles(){const e=this.newList.map((e=>e.fileKey));return this.oldList.filter((t=>!e.includes(t.fileKey))).map((e=>e.fileKey))}},R={Get:{noticeOne:e=>Y(`/api/ewp/notice/${e}`),noticeList:(e={})=>{const{officeCode:t,title:i,fixYN:n,startDate:s,eDate:o,pageNo:a,pageCnt:l}=e;return Y("/api/ewp/notice/list",{officeCode:t,title:i,fixYN:n,startDate:s,eDate:o,pageNo:a,pageCnt:l})},noticeListCnt:(e={})=>{const{officeCode:t,title:i,fixYN:n,startDate:s,eDate:o,pageNo:a,pageCnt:l}=e;return Y("/api/ewp/notice/list/cnt",{officeCode:t,title:i,fixYN:n,startDate:s,eDate:o,pageNo:a,pageCnt:l})}},Post:{noticeOne:(e={})=>{const{formData:t}=e;return B("/api/ewp/admin/notice",{data:t,headers:{"Content-Type":"multipart/form-data"}})},fileList:(e={})=>{const{noticeId:t,fileIdList:i}=e;return B(`/api/ewp/admin/notice/${t}/file/list`,{data:i})}},Put:{noticeOne:(e={})=>{const{noticeId:t,formData:i}=e;return F(`/api/ewp/admin/notice/${t}`,{data:i,headers:{"Content-Type":"multipart/form-data"}})}},Delete:{noticeOne:e=>I(`/api/ewp/admin/notice/${e}`),fileList:(e={})=>{const{noticeId:t,fileIdList:i}=e;return I(`/api/ewp/admin/notice/${t}/file/list`,{data:i})}}},_=e=>({init(e={}){const{officeCode:t=0,title:i,startDate:n="",endDate:s="",pageNo:o=1,pageCnt:a=10,pagination:l=!1}=e;this.pageNo=1,this.pageCnt=10,this.pagination=l,this.pagination&&(this.pagingRenderer=new Pagination({container:$("#pagination"),maxVisibleElements:9,enhancedMode:!1,pageClickCallback:e=>{this.nonfixedPageMove(e)}})),v.init({officeCode:t,title:i,startDate:n,endDate:s}),v.initOffice(),v.initTitle(),moment(),v.enableResetBtn({startDate:"",endDate:""}),v.on("search",((e={})=>{this.search(e)})),v.on("reset",((e={})=>{this.reset(e)})),this.search(v.getSearchInput())},reset(e){this.pageNo=1,this.search(e)},async search(e={}){const{officeCode:t=this.officeCode,title:i=this.title,startDate:n=this.startDate,endDate:s=this.endDate}=e;this.officeCode=t,this.title=i,this.startDate=n,this.endDate=s,this.totalCnt=null,await this.loadFixedPage(),await this.loadNonfixedPage()},async loadFixedPage(){await(async()=>{await w({request:await R.Get.noticeList,param:{officeCode:this.officeCode,title:this.title,fixYN:"Y",startDate:this.startDate,endDate:this.endDate}}).success((t=>{e.renderFixedNotices(t)})).exe()})()},async loadNonfixedPage(){const t=async()=>{let e=!0;return $("#pagination").empty(),await w({request:R.Get.noticeListCnt,param:{officeCode:this.officeCode,title:this.title,fixYN:"N",startDate:this.startDate,endDate:this.endDate,pageNo:this.pageNo,pageCnt:this.pageCnt}}).success((e=>{this.totalCnt=e,this.pageNo=1,this.pagingRenderer?.make(this.totalCnt,this.pageCnt)})).error((()=>{this.pageNo=null,e=!1})).exe(),e};(this.totalCnt||await t())&&await(async()=>{await w({request:await R.Get.noticeList,param:{officeCode:this.officeCode,title:this.title,fixYN:"N",startDate:this.startDate,endDate:this.endDate,pageNo:this.pageNo,pageCnt:this.pageCnt}}).success((t=>{e.renderNonFixedNotices(t)})).exe()})()},async nonfixedPageMove(e=this.pageNo+1){this.pageNo=e,await this.loadNonfixedPage()}}),K=e=>({initViewModal(){const e=m.get("noticeViewModal"),s=e.querySelector("#office"),l=e.querySelector("#title"),r=e.querySelector("#contents"),c=e.querySelector("#fileViewBox"),d=e.querySelector("#writerViewBox"),h=e.querySelector("[data-modal-btn=UPDATE]");return c.show=()=>{c.style.display=""},c.hide=()=>{c.style.display="none"},c.setFileCount=e=>{c.querySelector("#attachedCount").innerHTML=e+"개"},c.clearFile=()=>{c.querySelector("ul").innerHTML=""},c.addFile=e=>{const t=c.querySelector("ul"),n=o("li","list-group-item","d-flex"),s=o("span");s.innerHTML=e.fileLabel+"."+e.fileExt,n.appendChild(s);const l=o("span","ml-2","fw-light");if(l.innerHTML="("+i(e.fileSize)+")",n.appendChild(l),"SSO"==loginType){const t=o("i","fas","fa-download","cursor-pointer","ml-auto");t.title="다운로드",t.onclick=()=>{const t=e.fileId;H.downloadOne(t)},n.appendChild(t)}t.appendChild(n),"Y"==e.pdfGeneratedYN||"Y"==e.webpGeneratedYN?(a(s,"href-link"),s.onclick=()=>{const t=e.fileId,i=e.fileCategory;H.viewFileOne({fileId:t,fileCategory:i})}):a(s,"text-muted")},(()=>{const e=o("span","mx-1");d.appendChild(e);const t=o("span","mx-1");d.appendChild(t);const i=o("span","mx-1","interphone");d.appendChild(i),d.setWriteDate=t=>{e.innerHTML=moment(t).format("YYYY.MM.DD")},d.setWriterName=e=>{t.innerHTML=e},d.setWriterDeskPhone=e=>{i.innerHTML=e}})(),e.showFormData=i=>{e.getFormData=()=>i,c.style.display="",s.innerHTML=i.officeName,l.innerText=n(i.title),r.innerText=n(i.contents),(()=>{if(c.clearFile(),t(i.fileList))c.hide();else{const e=i.fileList;c.setFileCount(e.length),e.forEach((e=>{c.addFile(e)})),c.show()}})(),d.setWriteDate(i.regDateTime),d.setWriterName(i.writer?.nameplate),d.setWriterDeskPhone(i.writer?.officeDeskPhone),h&&(i.writerId==loginKey?h.style.display="":h.style.display="none")},h?.addEventListener("click",(()=>{const t=e.getFormData();this.showUpdateModal(t)})),e},initWriteModal(){const i=m.get("noticeWriteModal"),s=(i.querySelector("[data-modal-btn=CLOSE]"),i.querySelector("[data-modal-btn=SAVE]")),o=i.querySelector("[data-modal-btn=DELETE]"),a=i.querySelector("select[name='officeCode']"),l=i.querySelector("input[name='fixYN']"),r=i.querySelector("input[name='title']"),c=i.querySelector("textarea[name='contents']"),d=(i.querySelector("#fileUploadInfoBox"),async(n,s=null)=>{try{const o=(()=>{const e=new FormData,t=a.value,i=l.checked?"Y":"N",n=r.value,s=c.value;if(!n)throw new Error("제목을 입력해 주세요");if(!s)throw new Error("내용을 입력해 주세요");return e.append("officeCode",t),e.append("fixYN",i),e.append("title",n),e.append("contents",s),e})(),d=e=>{const t=new FormData;return e.forEach((e=>{t.append("list",e)})),t};w({request:n,param:{noticeId:s,formData:o},exception:"success-only"}).success((async n=>{const o=s||n.data,a=P.getAddedFiles();if(!t(a)){const e=(await q.fileList({fileList:d(a)})).data;await w({request:R.Post.fileList,param:{noticeId:o,fileIdList:e}}).exe()}const l=P.getDeletedFiles();t(l)||await w({request:R.Delete.fileList,param:{noticeId:o,fileIdList:l}}).exe(),await m.info({msg:n.message}),i.close(),e.reset?.()})).error((async e=>{m.error({response:e})})).exe()}catch(e){console.error("Form submission error:",e),e.message&&m.info({msg:e.message})}});return i.switchAddMode=()=>{o.style.display="none",s.style.display="",s.innerHTML="작 성",a.children[0].selected=!0,l.checked=!1,r.value="",c.value="",P.clearFiles(),s.onclick=async()=>{d(R.Post.noticeOne)}},i.switchUpdateMode=t=>{o.style.display="",s.style.display="",s.innerHTML="저 장",(e=>{a.value=e.officeCode,l.checked="Y"==e.fixYN,r.value=n(e.title),c.value=n(e.contents),P.setFiles(e.fileList)})(t),s.onclick=async()=>{d(R.Put.noticeOne,t.noticeId)},o.onclick=async()=>{"DELETE"==await m.confirm({msg:"공지사항을 삭제하시겠습니까?",delMode:!0})&&w({request:R.Delete.noticeOne,param:t.noticeId,exception:"success-only"}).success((async t=>{await m.info({msg:t.message}),i.close(),e.reset?.()})).error((async e=>{m.error({response:e})})).exe()}},i},getViewModal(){return this.viewModal||(this.viewModal=this.initViewModal()),this.viewModal},getWriteModal(){return this.writeModal||(this.writeModal=this.initWriteModal()),this.writeModal},showViewModal(e){const t=this.getViewModal();t.showFormData(e),t.show()},showAddModal(){const e=this.getWriteModal();e.switchAddMode(),e.show()},showUpdateModal(e){const t=this.getWriteModal();t.switchUpdateMode(e),t.show()}});document.addEventListener("DOMContentLoaded",(async()=>{z.init();const e=_(z);e.init({officeCode,pageNo:1}),W.setSearchManager(e);const t=K(e);W.setModalManager(t)}));const W={setSearchManager(e){this.noticeSearchManager=e},getSearchManager(){return this.noticeSearchManager},setModalManager(e){this.noticeModalManager=e},getModalManager(){return this.noticeModalManager}},V=e=>{const i=o("div","row");"Y"==e.fixYN&&a(i,"fixTop");const l=o("div","message");return i.appendChild(l),i.onclick=()=>{W.getModalManager().showViewModal(e)},(()=>{const i=o("div","d-flex","flex-column"),a=o("div","mb-1"),r=o("span","branch");r.innerHTML=e.officeName,a.appendChild(r),i.appendChild(a);const c=o("div");if(!t(e.fileList)){e.fileList.forEach((e=>e.fileKey=e.fileId));const t=o("i","fas","fa-paperclip","mr-2");c.appendChild(t)}const d=(h=n(e.title),s.createTextNode(h));var h;c.appendChild(d),i.appendChild(c),l.appendChild(i)})(),(()=>{const t=o("span","regDate"),i=moment(e.regDateTime);t.innerHTML=i.format("YYYY.MM.DD HH:mm"),l.appendChild(t)})(),i},z={init(){this.fixedNoticeListBox=r("#fixedNoticeListBox"),this.nonfixedNoticeListBox=r("#nonfixedNoticeListBox"),this.clearFixNotice(),this.clearNonfixNotice()},clearFixNotice(){this.fixedNoticeListBox.innerHTML=""},renderFixedNotices(e){const t=this.fixedNoticeListBox;for(const i of e){const e=V(i);t.appendChild(e)}this.enableScrollPagination()},clearNonfixNotice(){this.nonfixedNoticeListBox.innerHTML=""},renderNonFixedNotices(e){const t=this.nonfixedNoticeListBox;for(const i of e){const e=V(i);t.appendChild(e)}this.enableScrollPagination()},enableScrollPagination(){const e=r("#noticeContainer");var t,i;i=()=>{this.disableScrollPagination(),W.getSearchManager().nonfixedPageMove()},(t=e).prevScroll=0,t.onscroll=async()=>{const e=t.scrollHeight,n=t.offsetHeight,s=t.scrollTop;n+s>=e&&s-t.prevScroll>0&&i?.(),t.prevScroll=s},t.unsetVerticalScroll=()=>{t.onscroll=null}},disableScrollPagination(){const e=r("#noticeContainer");e.unsetVerticalScroll?.()}}})();